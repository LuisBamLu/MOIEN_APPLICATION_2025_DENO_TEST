
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="fr"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="fr"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="fr"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="fr">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Documentation de l'API Progestion">
    <meta name="author" content="Progetis">
    <meta name="keywords" content="">

    <title>Documentation Easy2Pilot V8 API 4.0.0 | by Easysolutions</title>

    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/stroke.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/animate.css">
    <link rel="stylesheet" type="text/css" href="css/prettyPhoto.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <link rel="stylesheet" type="text/css" href="js/syntax-highlighter/styles/shCore.css" media="all">
    <link rel="stylesheet" type="text/css" href="js/syntax-highlighter/styles/shThemeRDark.css" media="all">

    <!-- CUSTOM -->
    <link rel="stylesheet" type="text/css" href="css/custom.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <div class="container">

            <section id="top" class="section docs-heading">

                <div class="row">
                    <div class="col-md-12">
                        <div class="big-title text-center">
                            <img class="main_logo" src="images/logo_easy.svg" />
                            <h1>Documentation Easy2Pilot V8 API</h1>
                            <p class="lead">API version 4.0.0</p>
                            <div>
                                                                    <a href="index.php?dark=1">Dark mode</a>
                                                            </div>
                        </div>
                        <!-- end title -->
                    </div>
                    <!-- end 12 -->
                </div>
                <!-- end row -->

                <hr>

            </section>
            <!-- end section -->

            <div class="row">

                <div class="col-md-4">
                    <nav class="docs-sidebar" data-spy="affix" data-offset-top="300" data-offset-bottom="200" role="navigation">
                        <ul class="nav">
                            <li><a href="#historique_document">Historique du document</a></li>
                            <li><a href="#introduction">1. Introduction</a></li>
                            <li><a href="#authentification">2. Authentification</a>
                                <ul class="nav">
                                    <li><a href="#authentification_1">2.1. Récupérer un token</a></li>
                                </ul>
                            </li>
                            <li><a href="#requetes_api">3. Requêtes Api Portail</a>
                                <ul class="nav">
                                    <li class="even"><a href="#requetes_api_1">3.1. Annonce - Liste</a></li>
                                    <li class="odd"><a href="#requetes_api_2">3.2. Annonce - Structure</a></li>
                                    <li class="even"><a href="#requetes_api_3">3.3. Annonce - Ajouter</a></li>
                                    <li class="odd"><a href="#requetes_api_4">3.4. Annonce - Supprimer</a></li>
                                    <li class="even"><a href="#requetes_api_5">3.5. Nombre intéressés</a></li>
                                    <li class="odd"><a href="#requetes_api_6">3.6. Callback - Ajouter</a></li>
                                    <li class="even"><a href="#requetes_api_7">(en construction) 3.7. Annonce - Retour de publication</a></li>
                                    <li class="odd"><a href="#requetes_api_8">3.8. Rdv - Liste disponibilités</a></li>
                                    <li class="even"><a href="#requetes_api_9">3.9. Rdv - Ajouter</a></li>
                                    
                                                                    </ul>
                            </li>
                            <li><a href="#webhooks">4. Webhooks</a>
                                <ul class="nav">
                                    <li class="even"><a href="#webhook_1">4.1. Publication/retrait d'une annonce</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div class="col-md-8">
                    <section id="historique_document" class="welcome">

    <div class="row">
        <div class="col-md-12 left-align">
            <h2 class="dark-text">Historique du document<hr></h2>
            <div class="row">

                <div class="col-md-12 full">
                    <div class="intro1" data-order="DESC">
                        <ul>
                            <li><strong>Version : </strong>4.0.0</li>
                            <li><strong>Date : </strong> 11/03/2020</li>
                            <li><strong>Auteur : </strong> Julien Bolle</li>
                            <li><strong>Commentaire : </strong><br/>
                                Création du document
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
            <!-- end row -->
        </div>
    </div>
</section>                    <section id="introduction" class="section">
    <div class="row">
        <div class="col-md-12 left-align">
            <h2 class="dark-text">1. Introduction<hr></h2>
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->

    <div class="row">
        <div class="col-md-12">
            <p>
                Le lien de l'API en production (remplacé par xxxx dans la suite du document)&nbsp;:<br/>
                <b><a href="https://middleware-production.easy2pilot-v8.com/api/">https://middleware-production.easy2pilot-v8.com/api/UUID_AGENCE/ </a></b>
            </p>
            <p>
                L'<b>uuid agence</b> correspond à l'id unique de l'agence, il vous sera transmis par Easysolutions.
            </p>
            <p>
                Le webservice est une API RESTful avec authentification, de ce fait il réceptionne des données selon les méthodes GET / POST / DELETE / PUT qui sont encodées au format JSON et retourne une réponse au même format.
            </p>
            <p>
                L'URL de l'API ainsi que vos identifiants pour vous y connecter vous seront transmis par Easysolutions, si vous ne les avez pas reçus veuillez prendre contact directement avec nous.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <h4>Scénario courant&nbsp;:</h4>
            <ul>
                <li>Le site internet doit passer par l'API pour récupérer ou modifier des informations.</li>
                <li>Si l'api renvoie une erreur 401, le site internet refait une demande d'authentification et reçoit un nouveau token d'accès.</li>
            </ul>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h4>Retour&nbsp;:</h4>
            <b>
                La structure de retour du WebService est toujours un tableau sous la même forme&nbsp;:
            </b>
            <ul>
                <li>Status : code de retour de la requête</li>
                <li>Error : message d'erreur s'il y en a un</li>
                <li>Data : Données récupérées pour cette requête (absent en cas d'erreur)</li>
            </ul>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h4>Codes de retour&nbsp;:</h4>
            <ul>
                <li><b>200</b>&nbsp;: Ok.</li>
                <li><b>400</b>&nbsp;: Erreurs diverses.</li>
                <li><b>401</b>&nbsp;: Problème d'autorisation.</li>
                <li><b>404</b>&nbsp;: Ressource inconnue / route inconnue.</li>
                <li><b>500</b>&nbsp;: Problème de serveur ou de base de données.</li>
            </ul>
        </div>
    </div>
</section>
                    <section id="authentification" class="section">
    <div class="row">
        <div class="col-md-12 left-align">
            <h2 class="dark-text">2. Authentification<hr></h2>
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->

    <div class="row">
        <div class="col-md-12">
            <p>
                La cinématique d'authentification s'appuie sur le type d'autorisation Client credentials grant.
            </p>
            <p>
                Les informations principales dont vous avez besoin pour vous authentifier : l'url d'appel contenant l'UUID de l'agence, le login et le mot de passe associé.
            </p>
            <p>
                Une fois ces éléments en votre possession, il vous faudra faire une demande de token afin de bénéficier d'un accès temporaire à l'api. Le token a une validité de 30 minutes, si celui-ci expire il vous faudra à nouveau faire une requête d'identification pour continuer à utiliser le WebService.
            </p>
            <p>
                L'application s'authentifie auprès de Easysolutions et demande un access token. Si l'application est autorisée, Easysolutions génère et transmet un access token.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="requete_detail">
                <h4 id="authentification_1">2.1. Récupérer un token&nbsp;:</h4>
                <span>Point d'accès : <b>xxxxx/token</b></span><br/>
                <span>Méthode : <b>POST</b></span><br/>
                <span style="color:red;">Les identifiants sont renseignés dans la passerelle ApiV4 de votre logiciel.</span>

                <h5>Détail des paramètres :</h5>
                <table class="table table-striped">
                    <tbody>
                    <tr>
                        <td><b>Paramètre(s)</b></td>
                        <td><b>Valeur</b></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td><b>En-tête(s)</b></td>
                        <td><b>Valeur</b></td>
                    </tr>
                    <tr>
                        <td>Content-Type</td>
                        <td>application/json;charset=UTF-8</td>
                    </tr>
                    <tr>
                        <td><b>Corps de la requête</b></td>
                        <td><b>Valeur</b></td>
                    </tr>
                    <tr>
                        <td>login</td>
                        <td>Votre identifiant </td>
                    </tr>
                    <tr>
                        <td>password</td>
                        <td>Votre clé secrète</td>
                    </tr>
                    </tbody>
                </table>

                <h5>Exemple d'appel :</h5>
                <pre class="brush: css;">
                    POST /api/UUID_AGENCE/token
                    Content-Type: application/json;charset=UTF-8

                    {
                      "login": "[identifiant]"
                      "password": "[clé secrète]",
                    }
                </pre>

                <h4>Description de la réponse&nbsp;:</h4>
                <table class="table table-striped">
                    <tbody>
                    <tr>
                        <td><b>En-tête(s)</b></td>
                        <td><b>Valeur</b></td>
                    </tr>
                    <tr>
                        <td>Content-Type</td>
                        <td>application/json;charset=UTF-8</td>
                    </tr>
                    <tr>
                        <td>Cache-Control</td>
                        <td>no-store</td>
                    </tr>
                    <tr>
                        <td>Pragma</td>
                        <td>no-cache</td>
                    </tr>
                    <tr>
                        <td><b>Corps de la réponse</b></td>
                        <td><b>Valeur</b></td>
                    </tr>
                    <tr>
                        <td>token</td>
                        <td>Valeur de l'access token généré</td>
                    </tr>
                    </tbody>
                </table>

                <h5>Exemple de retour :</h5>
                <pre class="brush: css;">
                    HTTP 200 OK
                    Content-Type: application/json;charset=UTF-8
                    Cache-Control: no-store
                    Pragma: no-cache

                    {
                      "data": {
                          "token": "5432103eedb233ba17906a109123456"
                      },
                      "status": 200,
                      "message": ""
                    }
                </pre>

                <h5>Cas d'erreur possibles :</h5>
                <span>Identifiant client et/ou mot de passe erroné ou absent :</span>
                <pre class="brush: css;">
                    HTTP 200 Ok
                    Content-Type: application/json
                    Cache-Control: no-store
                    Pragma: no-cache

                    {
                        "status": 500,
                        "message": "Identifiants de passerelle incorrects"
                    }
                </pre>
            </div>
        </div>
    </div>
</section>                    <section id="requetes_api" class="section">
    <div class="row">
        <div class="col-md-12 left-align">
            <h2 class="dark-text">3. Requêtes Api Portail<hr></h2>
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->

    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_1">3.1. Annonce - Liste des annonces publiées sur la passerelle&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/annonces</b></span><br/>
            <span>Méthode : <b>GET</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>token</td>
                    <td>String</td>
                    <td>Votre access token</td>
                </tr>
                <tr>
                    <td>urlphotos</td>
                    <td>Boolean</td>
                    <td>Récupérer l'url des photos de l'annonce</td>
                </tr>
                <tr>
                    <td>filters</td>
                    <td>Array of objects</td>
                    <td>Recherche d'annonces.</td>
                </tr>
                <tr>
                    <td class="indent-1">key</td>
                    <td>String</td>
                    <td>Champ dans lequel rechercher</td>
                </tr>
                <tr>
                    <td class="indent-1">value</td>
                    <td>String</td>
                    <td>Valeur à rechercher pour le champ</td>
                </tr>
                <tr>
                    <td class="indent-1">compare</td>
                    <td>String</td>
                    <td>
                        Opérateur à utiliser<br/>
                        <b>=, LIKE, >, <, >=, <=, IN, IS&nbsp;NOT&nbsp;NULL</b>
                    </td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "token":"5432103eedb233ba17906a109123456",
                    "urlphotos":true,
                    "filters":[{
                        "key":"id","value":"520","compare":"="
                    }]
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Array</td>
                    <td>Liste des annonces.</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": [
                      {...}
                  ],
                  "status": 200,
                  "message": ""
               }
            </pre>
        </div>


            </div>
</div>    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_2">3.2. Annonce - Structure de retour de l'annonce&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/structure</b></span><br/>
            <span>Méthode : <b>GET</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>token</td>
                    <td>String</td>
                    <td>Votre access token</td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "token":"5432103eedb233ba17906a109123456"
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Object</td>
                    <td>Données</td>
                </tr>
                <tr>
                    <td class="indent-1">hash</td>
                    <td>String</td>
                    <td>Hash md5 de la structure</td>
                </tr>
                <tr>
                    <td class="indent-1">structure</td>
                    <td>Object</td>
                    <td>Structure complète d'une annonce.</td>
                </tr>
                <tr>
                    <td class="indent-2">type</td>
                    <td>String</td>
                    <td>Type de la valeur renvoyée (string, boolean, integer, ...).</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": {
                        "hash":"846a06edab52bc177a69f3077d65fb2e",
                        "structure":{
                            "chauffage":{
                                "climatisation":{
                                    "type":"boolean"
                                }
                            },
                            {...}
                        }
                  },
                  "status": 200,
                  "message": ""
               }
            </pre>
        </div>
    </div>
</div>    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_3">3.3. Annonce - Ajout d'une annonce sur la passerelle&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/addAnnonce</b></span><br/>
            <span>Méthode : <b>POST</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>passerelle</td>
                    <td>Object</td>
                    <td>Vos identifiants (les mêmes que pour le token).</td>
                </tr>
                <tr>
                    <td class="indent-1">login</td>
                    <td>String</td>
                    <td>Votre identifiant</td>
                </tr>
                <tr>
                    <td class="indent-1">password</td>
                    <td>String</td>
                    <td>Votre clé secrète</td>
                </tr>
                <tr>
                    <td>annonces</td>
                    <td>Array of objects</td>
                    <td>Liste des annonces à insérer.</td>
                </tr>
                <tr>
                    <td class="indent-1">...</td>
                    <td>Object</td>
                    <td>La structure de l'annonce est récupérable <a href="#requetes_api_2">(3.2)</a></td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "passerelle":{
                        "login":"[identifiant]",
                        "password":"[clé secrète]"
                    },
                    "annonces":[
                        {...},
                        {...}
                    ]
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Array of object</td>
                    <td>Annonces créées (dans le même ordre que la requête).</td>
                </tr>
                <tr class="indent-1">
                    <td>origine_id</td>
                    <td>String</td>
                    <td>Id de l'annonce créée.</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": [
                      {
                        "origine_id":"1234"
                      },
                      {
                        "origine_id":"1235"
                      }
                  ],
                  "status": 200,
                  "message": ""
               }
            </pre>
        </div>
    </div>
</div>    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_4">3.4. Annonce - Suppression d'une annonce sur la passerelle&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/removeAnnonce</b></span><br/>
            <span>Méthode : <b>POST</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>passerelle</td>
                    <td>Object</td>
                    <td>Vos identifiants (les mêmes que pour le token).</td>
                </tr>
                <tr>
                    <td class="indent-1">login</td>
                    <td>String</td>
                    <td>Votre identifiant</td>
                </tr>
                <tr>
                    <td class="indent-1">password</td>
                    <td>String</td>
                    <td>Votre clé secrète</td>
                </tr>
                <tr>
                    <td>annonces</td>
                    <td>Array of objects</td>
                    <td>Liste des annonces à insérer.</td>
                </tr>
                <tr>
                    <td class="indent-1">type_annonce</td>
                    <td>String</td>
                    <td>Type de l'annonce (lots ou batiments)</td>
                </tr>
                <tr>
                    <td class="indent-1">id</td>
                    <td>String</td>
                    <td>Id de l'annonce</td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "passerelle":{
                        "login":"[identifiant]",
                        "password":"[clé secrète]"
                    },
                    "annonces":[
                        {
                            "type_annonce":"lots"
                            "id":"1234"
                        },
                        {
                            "type_annonce":"lots"
                            "id":"1235"
                        }
                    ]
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Array of object</td>
                    <td>Annonces supprimées.</td>
                </tr>
                <tr class="indent-1">
                    <td>origine_id</td>
                    <td>String</td>
                    <td>Id de l'annonce supprimée.</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": [
                      {
                        "origine_id":"1234"
                      },
                      {
                        "origine_id":"1235"
                      }
                  ],
                  "status": 200,
                  "message": ""
               }
            </pre>
        </div>
    </div>
</div>    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_5">3.5. Nombre intéressés - Nombre des personnes intéressées par un ensemble de critères&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/nbInteresses</b></span><br/>
            <span>Méthode : <b>GET</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>token</td>
                    <td>String</td>
                    <td>Votre access token</td>
                </tr>
                <tr>
                    <td>type_transaction</td>
                    <td>String</td>
                    <td>Type de transaction (vente, location)</td>
                </tr>
                <tr>
                    <td>criteres</td>
                    <td>Array of objects</td>
                    <td>Critères de recherche.</td>
                </tr>
                <tr>
                    <td class="indent-1">key</td>
                    <td>String</td>
                    <td>Critère à rechercher</td>
                </tr>
                <tr>
                    <td class="indent-1">value</td>
                    <td>String</td>
                    <td>Valeur à rechercher (parfois non présent, dépend du critère, voir exemple ci-dssous)</td>
                </tr>
                <tr>
                    <td class="indent-1">value_min</td>
                    <td>String</td>
                    <td>Valeur minimum à rechercher (parfois non présent, dépend du critère, voir exemple ci-dssous)</td>
                </tr>
                <tr>
                    <td class="indent-1">value_max</td>
                    <td>String</td>
                    <td>Valeur maximum à rechercher (parfois non présent, dépend du critère, voir exemple ci-dssous)</td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "token":"5432103eedb233ba17906a109123456",
                    "type_transaction":"vente",
                    "criteres":[
                        {
                            "key":"nature",
                            "value":"appartement"
                        },
                        {
                            "key":"zone",
                            "value":"Bonnevoie"
                        },
                        {
                            "key":"budget",
                            "value_min":"0",
                            "value_max":"999999"
                        },
                        {
                            "key":"nb_chambres",
                            "value_min":"0",
                            "value_max":"5"
                        },
                        {
                            "key":"surface",
                            "value_min":"0",
                            "value_max":"200"
                        }
                    ]
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Object</td>
                    <td>Données.</td>
                </tr>
                <tr>
                    <td class="indent-1">total</td>
                    <td>Integer</td>
                    <td>Nombre d'intéressés</td>
                </tr>
                <tr>
                    <td class="indent-1">bureaux</td>
                    <td>Array of Objects</td>
                    <td>Détail par bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">computed_name</td>
                    <td>String</td>
                    <td>Nom du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">computed_address</td>
                    <td>String</td>
                    <td>Adresse du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">street_number</td>
                    <td>String</td>
                    <td>Numéro de rue du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">route</td>
                    <td>String</td>
                    <td>Rue du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">postal_code</td>
                    <td>String</td>
                    <td>Code postal du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">locality</td>
                    <td>String</td>
                    <td>Localité du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">country</td>
                    <td>String</td>
                    <td>Pays du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">lat</td>
                    <td>String</td>
                    <td>Latitude du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">lng</td>
                    <td>String</td>
                    <td>Longitude du bureau</td>
                </tr>
                <tr>
                    <td class="indent-2">nb_interesses</td>
                    <td>Integer</td>
                    <td>Nombre d'intéressés dans ce bureau</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": {
                        "total": 17,
                        "bureaux": [
                            {
                                "computed_name": "Agence de la Gare",
                                "computed_address": "24, Rue de la Gare L-1234 Luxembourg, Luxembourg",
                                "street_number": "24",
                                "route": "Rue de la Gare",
                                "postal_code": "L-1234",
                                "locality": "Luxembourg",
                                "country": "Luxembourg",
                                "lat": "49.0000000",
                                "lng": "2.0000000",
                                "nb_interesses": 15,
                            },
                            {
                                "computed_name": "Agence du Centre",
                                "computed_address": "42, Rue du Centre-Ville L-1234 Luxembourg, Luxembourg",
                                "street_number": "42",
                                "route": "Rue du Centre-Ville",
                                "postal_code": "L-1234",
                                "locality": "Luxembourg",
                                "country": "Luxembourg",
                                "lat": "49.0000000",
                                "lng": "2.0000000",
                                "nb_interesses": 2,
                            }
                        ]
                  },
                  "status": "200",
                  "message": ""
               }
            </pre>
        </div>
    </div>
</div>    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_6">3.6. Callback - Ajouter un callback concernant la passerelle&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/addCallback</b></span><br/>
            <span>Méthode : <b>POST</b></span><br/>
            <span>Description : <b>Les callbacks sont les messages laissés par les clients à destination de l'agence.
                    Ils permettent de signaler l'intérêt du client pour un bien.</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>token</td>
                    <td>String</td>
                    <td>Votre access token</td>
                </tr>
                <tr>
                    <td>bien</td>
                    <td>Object</td>
                    <td>Les infos du bien.</td>
                </tr>
                <tr>
                    <td class="indent-1">id_e2p</td>
                    <td>String</td>
                    <td>Id Z16Pro du bien concerné (envoyé avec l'annonce)</td>
                </tr>
                <tr>
                    <td>client</td>
                    <td>Object</td>
                    <td>Les infos du client.</td>
                </tr>
                <tr>
                    <td class="indent-1">nom</td>
                    <td>String</td>
                    <td>Nom du client</td>
                </tr>
                <tr>
                    <td class="indent-1">prenom</td>
                    <td>String</td>
                    <td>Prénom du client</td>
                </tr>
                <tr>
                    <td class="indent-1">tel</td>
                    <td>String</td>
                    <td>Téléphone du client</td>
                </tr>
                <tr>
                    <td class="indent-1">email</td>
                    <td>String</td>
                    <td>Email du client</td>
                </tr>
                <tr>
                    <td class="indent-1">adresse</td>
                    <td>String</td>
                    <td>Adresse du client</td>
                </tr>
                <tr>
                    <td class="indent-1">code_postal</td>
                    <td>String</td>
                    <td>Code postal du client</td>
                </tr>
                <tr>
                    <td class="indent-1">ville</td>
                    <td>String</td>
                    <td>Ville du client</td>
                </tr>
                <tr>
                    <td>recherche</td>
                    <td>Object</td>
                    <td><b>Facultatif</b>. Permet d'indiquer la recherche faite par le client pour trouver le bien.</td>
                </tr>
                <tr>
                    <td class="indent-1">type</td>
                    <td>String</td>
                    <td>Type de transaction (vente, location)</td>
                </tr>
                <tr>
                    <td class="indent-1">nature</td>
                    <td>String</td>
                    <td>Nature du bien</td>
                </tr>
                <tr>
                    <td class="indent-1">surface</td>
                    <td>String</td>
                    <td>Surface du bien (indiquer un entier dans une stirng)</td>
                </tr>
                <tr>
                    <td class="indent-1">chambres</td>
                    <td>String</td>
                    <td>Nb de chambres du bien (indiquer un entier dans une stirng)</td>
                </tr>
                <tr>
                    <td class="indent-1">budget_max</td>
                    <td>String</td>
                    <td>Budget max du bien (indiquer un entier dans une stirng)</td>
                </tr>
                <tr>
                    <td class="indent-1">budget_min</td>
                    <td>String</td>
                    <td>Budget min du bien (indiquer un entier dans une stirng)</td>
                </tr>
                <tr>
                    <td>message</td>
                    <td>String</td>
                    <td>Message du client.</td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "token":"5432103eedb233ba17906a109123456",
                    "bien": {
                        "id_e2p": "3244"
                    },
                    "client": {
                        "nom": "Doe",
                        "prenom": "John",
                        "tel": "0000",
                        "email": "john@doe.com",
                        "adresse": "22, rue du Soleil",
                        "code_postal": "57000",
                        "ville": "Metz"
                    },
                    "recherche": {
                        "type": "vente",
                        "nature": "Appartement",
                        "surface": "35",
                        "chambres": "1",
                        "budget_max": "450000",
                        "budget_min": "0"
                    },
                    "message": "Merci de me recontacter rapidement."
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Array</td>
                    <td>Tableau vide.</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": [],
                  "status": 200,
                  "message": ""
               }
            </pre>
        </div>


            </div>
</div>    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_7">(en construction) 3.7. Annonce - Retour de publication sur la passerelle&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/addAnnonceFeedback</b></span><br/>
            <span>Méthode : <b>POST</b></span><br/>
            <span>Description : <b>C'est avec cette route que la passerelle peut renvoyer les messages d'erreur concernant une publication.
                Ils seront utilisés pour informer plus précisémment l'utilisateur sur la nature de l'erreur.</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>token</td>
                    <td>String</td>
                    <td>Votre access token</td>
                </tr>
                <tr>
                    <td>id_e2p</td>
                    <td>String</td>
                    <td>Id easy2pilot du bien concerné (envoyé avec l'annonce)</td>
                </tr>
                <tr>
                    <td>code</td>
                    <td>Integer</td>
                    <td>Code d'erreur <a href="#requetes_api_7_codes_erreur">(voir la liste)</a></td>
                </tr>
                <tr>
                    <td>description</td>
                    <td>String</td>
                    <td>Description de l'erreur pour aider l'utilisateur à corriger.<br/>
                        Par exemple le(s) champ(s) posant problème ainsi que la valeur envoyée et ce qui était attendu.
                    </td>
                </tr>
                <tr>
                    <td>datetime</td>
                    <td>String</td>
                    <td>Optionnel. Date et heure de l'erreur (YYYY-MM-DD HH:mm:ss)</td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "token":"5432103eedb233ba17906a109123456",
                    "id_e2p": "3244",
                    "code": 203,
                    "description": "La nature 'agence immobilière' n'existe pas dans notre base de données.",
                    "datetime": "2021-01-31 10:00:00"
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Array</td>
                    <td>Tableau vide.</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": [],
                  "status": 200,
                  "message": ""
               }
            </pre>

            <h4 id="requetes_api_7_codes_erreur">Codes d'erreur possibles :</h4>
            <table>
                <tbody>
                <tr>
                    <td><b>Code</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>100:</td>
                    <td>Malformé</td>
                </tr>
                <tr>
                    <td class="indent-1">101:</td>
                    <td class="indent-1">Structure de l'annonce incorrecte</td>
                </tr>
                <tr>
                    <td class="indent-1">102:</td>
                    <td class="indent-1">Format de l'annonce incorrect (json, xml, ...)</td>
                </tr>
                <tr>
                    <td class="indent-1">103:</td>
                    <td class="indent-1">Un champ n'a pas le format attendu</td>
                </tr>
                <tr>
                    <td>200:</td>
                    <td>Données incorrectes</td>
                </tr>
                <tr>
                    <td class="indent-1">201:</td>
                    <td class="indent-1">Champ obligatoire manquant</td>
                </tr>
                <tr>
                    <td class="indent-1">202:</td>
                    <td class="indent-1">Correspondance de ville incorrecte ou manquante</td>
                </tr>
                <tr>
                    <td class="indent-1">203:</td>
                    <td class="indent-1">Correspondance de nature incorrecte ou manquante</td>
                </tr>
                <tr>
                    <td>300:</td>
                    <td>Indisponibilité serveur</td>
                </tr>
                <tr>
                    <td class="indent-1">301:</td>
                    <td class="indent-1">Le serveur distant ne répond pas</td>
                </tr>
                <tr>
                    <td class="indent-1">302:</td>
                    <td class="indent-1">Réponse du serveur distant vide ou inattendue</td>
                </tr>
                <tr>
                    <td class="indent-1">303:</td>
                    <td class="indent-1">Page introuvable</td>
                </tr>
                </tbody>
            </table>
        </div>


            </div>
</div>    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_8">3.8. Rdv - Liste des disponibilités&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/listRdvClientDisponible</b></span><br/>
            <span>Méthode : <b>GET</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>token</td>
                    <td>String</td>
                    <td>Votre access token</td>
                </tr>
                <tr>
                    <td>date_debut</td>
                    <td>Datetime</td>
                    <td>Date début recherche (YYYY-MM-DD HH:mm:ss)</td>
                </tr>
                <tr>
                    <td>date_fin</td>
                    <td>Datetime</td>
                    <td>Date fin recherche (YYYY-MM-DD HH:mm:ss)</td>
                </tr>
                <tr>
                    <td>commercial_id</td>
                    <td>String</td>
                    <td>Identifiant du commercial</td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "token":"5432103eedb233ba17906a109123456",
                    "date_debut": "2021-01-25 08:00:00",
                    "date_fin": "2021-01-29 17:00:00"
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Array</td>
                    <td>Liste des disponibilités.</td>
                </tr>
                <tr>
                    <td class="indent-1">date_debut</td>
                    <td>Datetime</td>
                    <td>Date début dispo (YYYY-MM-DD HH:mm:ss)</td>
                </tr>
                <tr>
                    <td class="indent-1">date_fin</td>
                    <td>Datetime</td>
                    <td>Date fin dispo (YYYY-MM-DD HH:mm:ss)</td>
                </tr>
                <tr>
                    <td class="indent-1">commercial</td>
                    <td>Object</td>
                    <td>Commercial disponible</td>
                </tr>
                <tr>
                    <td class="indent-2">id</td>
                    <td>String</td>
                    <td>Identifiant du commercial</td>
                </tr>
                <tr>
                    <td class="indent-2">nom</td>
                    <td>String</td>
                    <td>Nom du commercial</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": [
                      "date_debut": "2021-01-25 08:00:00",
                      "date_fin": "2021-01-25 10:00:00",
                      "commercial": {
                          "id": "127",
                          "nom": "Jean Dupont"
                      }
                  ],
                  "status": 200,
                  "message": ""
               }
            </pre>
        </div>


            </div>
</div>    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="requetes_api_9">3.9. Rdv - Ajout d'un rdv client&nbsp;:</h4>
            <span>Point d'accès : <b>xxxxx/addRdvClient</b></span><br/>
            <span>Méthode : <b>POST</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>token</td>
                    <td>String</td>
                    <td>Votre access token</td>
                </tr>
                <tr>
                    <td>date_debut</td>
                    <td>Datetime</td>
                    <td>Date début (YYYY-MM-DD HH:mm:ss)</td>
                </tr>
                <tr>
                    <td>date_fin</td>
                    <td>Datetime</td>
                    <td>Date fin (YYYY-MM-DD HH:mm:ss)</td>
                </tr>
                <tr>
                    <td>remarque</td>
                    <td>String</td>
                    <td>Remarque du client</td>
                </tr>
                <tr>
                    <td>commercial_id</td>
                    <td>String</td>
                    <td>Identifiant du commercial</td>
                </tr>
                <tr>
                    <td class="indent-1">bien_id</td>
                    <td>String</td>
                    <td>Id easy2pilot du bien concerné (envoyé avec l'annonce) dans info/id</td>
                </tr>
                <tr>
                    <td>client</td>
                    <td>Object</td>
                    <td>Les infos du client.</td>
                </tr>
                <tr>
                    <td class="indent-1">nom</td>
                    <td>String</td>
                    <td>Nom du client</td>
                </tr>
                <tr>
                    <td class="indent-1">prenom</td>
                    <td>String</td>
                    <td>Prénom du client</td>
                </tr>
                <tr>
                    <td class="indent-1">tel</td>
                    <td>String</td>
                    <td>Téléphone du client</td>
                </tr>
                <tr>
                    <td class="indent-1">email</td>
                    <td>String</td>
                    <td>Email du client</td>
                </tr>
                <tr>
                    <td class="indent-1">adresse</td>
                    <td>String</td>
                    <td>Adresse du client</td>
                </tr>
                <tr>
                    <td class="indent-1">code_postal</td>
                    <td>String</td>
                    <td>Code postal du client</td>
                </tr>
                <tr>
                    <td class="indent-1">ville</td>
                    <td>String</td>
                    <td>Ville du client</td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                    "token":"5432103eedb233ba17906a109123456",
                    "date_debut": "2021-01-25 08:00:00",
                    "date_fin": "2021-01-25 10:00:00",
                    "remarque": "J'apporterai les documents dont nous avons parlé.",
                    "commercial_id": "127",
                    "bien_id": "24",
                    "client": {
                        "nom": "Doe",
                        "prenom": "John",
                        "tel": "0000",
                        "email": "john@doe.com",
                        "adresse": "22, rue du Soleil",
                        "code_postal": "57000",
                        "ville": "Metz"
                    },
                }
            </pre>

            <h4>Description de la réponse&nbsp;:</h4>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>En-tête(s)</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>Content-Type</td>
                    <td>application/json;charset=UTF-8</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>Corps de la réponse</b></td>
                    <td><b>Valeur</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Array</td>
                    <td>Tableau vide.</td>
                </tr>
                </tbody>
            </table>

            <h5>Success-Response :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                {
                  "data": [],
                  "status": 200,
                  "message": ""
               }
            </pre>
        </div>
    </div>
</div>    
</section>                    <section id="webhooks" class="section">
    <div class="row">
        <div class="col-md-12 left-align">
            <h2 class="dark-text">4. Webhooks<hr></h2>
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->

    <div class="row">
        <div class="col-md-12">
            <p>
                Nous utilisons un système de webhook permettant de signaler une modification d'annonce sur l'API.<br/>
                Si vous souhaitez être averti lors d'un changement, il faut au préalable que le client utilisant le logiciel Z16Pro ait renseigné une <b>URL callback</b> dans la configuration de la passerelle API.<br/>
                L'API appelera cette URL à chaque fois qu'un changement d'annonce sera effectué.<br/>
                Vous avez également la possibilité d'ajouter une clé d'API afin d'identifier l'agence ayant émis ou retiré une annonce.<br/>
                Pour ce faire, veuillez suivre les étapes ci-dessous ou demander à votre client de les suivre :
            </p>
            <ol>
                <li>Dans le logiciel Z16Pro du client, rendez-vous dans <b>Configuration / Passerelles.</b></li>
                <li>Identifiez la passerelle vers votre plateforme, le format doit être <b>V4 API</b>.</li>
                <li>Renseignez le champ URL callback avec l'URL de votre plateforme.</li>
                <li>Vous pouvez en plus renseigner une clé d'API en remplissant le champ <b>API KEY</b>, un header "X-API-TOKEN" sera ajouté à la requête.</li>
            </ol>
        </div>
    </div>

    <div class="row">
    <div class="col-md-12">
        <div class="requete_detail">
            <h4 id="webhook_1">4.1. Webhooks - Publication/retrait d'une annonce&nbsp;:</h4>
            <span>Point d'accès : <b>L'URL callback concernant votre plateforme définie dans le logiciel Z16Pro</b></span><br/>
            <span>Méthode : <b>POST</b></span><br/>
            <span>Header : <b>Si une API Key est définie, un header "X-API-TOKEN" contenant la clé sera ajouté à la requête</b></span><br/>
            <span>Description : <b>Cette requête est envoyée à chaque changement d'une annonce (publication ou retrait)</b></span><br/>

            <h5>Détail des paramètres :</h5>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <td><b>Champ</b></td>
                    <td><b>Type</b></td>
                    <td><b>Description</b></td>
                </tr>
                <tr>
                    <td>multiple</td>
                    <td>Integer</td>
                    <td>Valeur toujours envoyée : 1</td>
                </tr>
                <tr>
                    <td>data</td>
                    <td>Array of objects</td>
                    <td>Les id des annonces impactées et la modification faite.</td>
                </tr>
                <tr>
                    <td class="indent-1">id</td>
                    <td>Integer</td>
                    <td>Id de l'annonce concernée</td>
                </tr>
                <tr>
                    <td class="indent-1">action</td>
                    <td>String</td>
                    <td>"add" ou "delete", signifiant respectivement que l'annonce a été ajoutée ou retirée</td>
                </tr>
                </tbody>
            </table>

            <h5>Exemple d'appel :</h5>
            <pre class="brush: css;">
                HTTP 200 OK
                Content-Type: application/json;charset=UTF-8
                Cache-Control: no-store
                Pragma: no-cache
                X-API-TOKEN: AGC0001
                {
                    "multiple": 1,
                    "data": [
                        {"id": 1, "action": "add"},
                        {"id": 2, "action": "add"},
                        {"id": 3, "action": "add"},
                        {"id": 4, "action": "delete"},
                    ]
                }
            </pre>
            <p>
                Dans l'exemple, la requête signifie : les annonces 1 à 3 viennent d'être publiées, l'annonce 4 vient d'être dépubliée.<br/>
                Vous pouvez donc délencher à la suite un appel à la route <a href="#requetes_api_1">3.1. Annonces</a> par exemple.
            </p>
        </div>


            </div>
</div>
</section>                </div>
                <!-- // end .col -->

            </div>
            <!-- // end .row -->

        </div>
        <!-- // end container -->

    </div>
    <!-- end wrapper -->

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/retina.js"></script>
    <script src="js/jquery.fitvids.js"></script>
    <script src="js/wow.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>

    <!-- CUSTOM PLUGINS -->
    <script src="js/custom.js"></script>
    <script src="js/main.js"></script>

    <script src="js/syntax-highlighter/scripts/shCore.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushXml.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushCss.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushJScript.js"></script>

</body>

</html>
