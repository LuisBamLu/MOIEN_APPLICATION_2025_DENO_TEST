<script>
    // -- IMPORTS

    import
    {
        paymentStatusArrayStore,
        handleCreatePaymentStatus,
        handleDeletePaymentStatus,
        handleEditPaymentStatus,
        isPaymentStatusModalOpen,
        loadPaymentStatusArray,
        selectedPaymentStatusStore,
        togglePaymentStatusModal,
        isFormModified as isPaymentStatusFormModified,
        addNavigationEventListener,
        finalizeNavigation,
        handleChange,
        isConfirmationModalOpen,
        removeNavigationEventListener,
        toggleConfirmModal
    }
    from '$store/paymentStatusStore';
    import AdminPage from '$component/element/AdminPage.svelte';
    import { hasUserPermission } from '$store/profileStore';
    import Input from '$src/lib/component/element/Input.svelte';
    import { languageArrayStore } from '$src/lib/store/languageArrayStore';
    import InputLocalizedForm from '$src/lib/component/element/InputLocalizedForm.svelte';

    // -- CONSTANTS

    const titleSlugMap =
    {
        editTitle: 'edit-payment-status-label',
        addTitle: 'add-payment-status-label'
    };

    // -- VARIABLES

    let filterParameterByKeyMap =
    {
        id:
        {
            type: 'text',
            name: 'ID',
            value: ''
        },
        number:
        {
            type: 'number',
            name: 'Number',
            value: ''
        },
        name:
        {
            type: 'text',
            name: 'Name',
            value: ''
        },
        color:
        {
            type: 'text',
            name: 'Color',
            value: ''
        },
        creationTimestamp:
        {
            type: 'timestamp',
            name: 'Creation Date',
            value: ''
        },
        updateTimestamp:
        {
            type: 'timestamp',
            name: 'Update Date',
            value: ''
        }
    };
    let filterableColumnByColumnNameMap =
        {
            id: { columnLabel: 'ID', type: 'text' },
            name: { columnLabel: 'Name', type: 'text' },
            creationTimestamp: { columnLabel: 'Creation Date', type: 'timestamp' },
            updateTimestamp: { columnLabel: 'Update Date', type: 'timestamp' }
        };

    // -- FUNCTIONS

    function arrayProcessing(
        )
    {
    }

    // ~~

    function handleUpdatePaymentStatusLocalizedInput(
        event
        )
    {
        selectedPaymentStatusStore.update( ( paymentStatus ) => ( { ...paymentStatus, name: event.detail.text } ) );
    }
</script>

<AdminPage
    pageTitle="payment-status-label"
    selectedObject={ selectedPaymentStatusStore }
    objectArrayStore={ paymentStatusArrayStore }
    isObjectModalOpen={ isPaymentStatusModalOpen }
    filterParameterByKeyMap={ filterParameterByKeyMap }
    filterableColumnByColumnNameMap={ filterableColumnByColumnNameMap }
    titleSlugMap={ titleSlugMap }
    loadObjectArray={ loadPaymentStatusArray }
    arrayProcessing={ arrayProcessing }
    handleCreateObject={ handleCreatePaymentStatus }
    handleEditObject={ handleEditPaymentStatus }
    handleDeleteObject={ handleDeletePaymentStatus }
    toggleObjectModal={ togglePaymentStatusModal }
    showButton={ hasUserPermission( 'add-payment-status' ) }
    isFormModified={ $isPaymentStatusFormModified }
    search={ false }
>
    <form onchange={handleChange} class="edit-modal-form">
        <div class="input-row">
            <span class="font-weight-700 line-height-150 color-gray-100">ID</span>
            <Input
                type="text"
                bind:value={ $selectedPaymentStatusStore.id }
                fullWidth
                name="id"
                readonly
            />
        </div>

        <div class="input-row">
            <span class="font-weight-700 line-height-150 color-gray-100">Number</span>
            <Input
                type="number"
                bind:value={ $selectedPaymentStatusStore.number }
                fullWidth
                name="number"
            />
        </div>

        <div class="input-row">
            <span class="font-weight-700 line-height-150 color-gray-100">Name</span>
            <InputLocalizedForm
                id='user-right-slug'
                name='name'
                itemsString={ $selectedPaymentStatusStore.name }
                languageArray={ $languageArrayStore }
                on:update={ handleUpdatePaymentStatusLocalizedInput }
            />
        </div>

        <div class="input-row">
            <span class="font-weight-700 line-height-150 color-gray-100">Color</span>
            <Input
                type="color"
                bind:value={ $selectedPaymentStatusStore.color }
                fullWidth
                name="color"
                class="color"
            />
        </div>
    </form>
</AdminPage>
